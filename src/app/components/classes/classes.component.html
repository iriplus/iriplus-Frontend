<div class="classes-container">
  <div class="classes-card">

    <!-- Header -->
    <div class="card-header">
      <div class="header-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
          <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
        </svg>
      </div>
      <h1>Class Management</h1>
      <p>Manage the system‚Äôs classes</p>
    </div>

    <!-- Toolbar -->
    <div class="toolbar">
      <div class="search-container">
        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
          fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.3-4.3"/>
        </svg>
        <input
          type="text"
          class="search-input"
          placeholder="Search by code, description, or level..."
          [(ngModel)]="searchText"
          (input)="filterClasses()"
        >
      </div>

      <button class="btn-add" data-bs-toggle="modal" data-bs-target="#newClassModal">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
          fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 5v14"/>
          <path d="M5 12h14"/>
        </svg>
        New Class
      </button>
    </div>

    <!-- Table -->
    <div class="table-container">
      <table class="classes-table">
        <thead>
          <tr>
            <th>Code</th>
            <th>Description</th>
            <th>Suggested Level</th>
            <th>Capacity</th>
            <th>Teachers</th>
            <th>Students</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>

  <tr *ngFor="let c of filteredClasses">
    <td><span class="class-code">{{ c.class_code }}</span></td>
    <td><span class="class-description">{{ c.description }}</span></td>

    <td>
      <span class="level-badge">
        {{ c.suggested_level }}
      </span>
    </td>

    <td>
      <div class="capacity-info">
        <span class="capacity-current">
          {{ c.students || 0 }}
        </span>
        <span class="capacity-separator">/</span>
        <span class="capacity-max">
          {{ c.max_capacity }}
        </span>
      </div>
    </td>

    <td>
      <div class="teachers-count">
        <span>{{ c.teachers || 0 }}</span>
      </div>
    </td>

    <td>
      <div class="students-count">
        <span>{{ c.students || 0 }}</span>
      </div>
    </td>

    <td>
      <div class="action-buttons">
        <button class="btn-action btn-edit" title="Edit" (click)="openEdit(c)">‚úèÔ∏è</button>
        <button class="btn-action btn-delete" title="Delete" (click)="deleteClass(c.id)">üóëÔ∏è</button>
      </div>
    </td>
  </tr>

  <!-- Empty state -->
  <tr *ngIf="!isLoading && classes.length === 0">
    <td colspan="7" class="no-results">
      <div class="empty-state">
        <p>No classes found</p>
      </div>
    </td>
  </tr>

</tbody>

      </table>
    </div>

    <!-- Stats -->
    <div class="stats-bar">
      <div class="stat-item">
        <span class="stat-label">Total classes:</span>
        <span class="stat-value">{{ classes.length }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Showing:</span>
        <span class="stat-value">{{ classes.length }}</span>
      </div>
    </div>

  </div>
</div>

<div class="modal fade" id="newClassModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">{{ selectedClass ? 'Edit Class' : 'New Class' }}</h5>
          <button type="button" class="btn-close-custom" data-bs-dismiss="modal">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" 
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <line x1="18" y1="6" x2="6" y2="18"></line>
      <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
  </button>
      </div>

      <div class="modal-body">
        <app-class-form
          [classData]="selectedClass"
          (classSaved)="onClassSaved()">
        </app-class-form>
      </div>

    </div>
  </div>
</div>
